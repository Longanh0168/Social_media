{"ast":null,"code":"var _jsxFileName = \"D:\\\\WorkSpace\\\\Social Media\\\\client\\\\src\\\\components\\\\post\\\\Post.jsx\",\n    _s = $RefreshSig$();\n\nimport './post.scss';\nimport FavoriteBorderOutlinedIcon from '@mui/icons-material/FavoriteBorderOutlined';\nimport FavoriteOutlinedIcon from '@mui/icons-material/FavoriteOutlined';\nimport TextsmsOutlinedIcon from '@mui/icons-material/TextsmsOutlined';\nimport ShareOutlinedIcon from '@mui/icons-material/ShareOutlined';\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz';\nimport { Link } from 'react-router-dom';\nimport Comments from '../comments/Comments';\nimport { useState } from 'react';\nimport moment from 'moment';\nimport { useQuery, useQueryClient, useMutation } from '@tanstack/react-query';\nimport { makeRequest } from '../../axios';\nimport { useContext } from 'react';\nimport { AuthContext } from '../../context/authContext';\nimport { handleScroll } from '../../activate/scroll';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = _ref => {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const [commentOpen, setCommentOpen] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    isLoading,\n    data\n  } = useQuery(['likes', post.id], () => makeRequest.get('/likes?postId=' + post.id).then(res => {\n    return res.data;\n  }));\n  const queryClient = useQueryClient();\n  const mutation = useMutation(liked => {\n    if (liked) return makeRequest.delete('/likes?postId=' + post.id);\n    return makeRequest.post('/likes', {\n      postId: post.id\n    });\n  }, {\n    onSuccess: () => {\n      // Invalidate and refetch\n      queryClient.invalidateQueries(['likes']);\n    }\n  });\n\n  const handleLike = () => {\n    mutation.mutate(data.includes(currentUser.id));\n  };\n\n  const deleteMutation = useMutation(postId => {\n    return makeRequest.delete('/posts/' + postId);\n  }, {\n    onSuccess: () => {\n      // Invalidate and refetch\n      queryClient.invalidateQueries(['posts']);\n    }\n  });\n\n  const handleDelete = () => {\n    deleteMutation.mutate(post.id);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userInfo\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: '/profile/' + post.userId,\n            onClick: handleScroll,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: '/upload/' + post.profilePic,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${post.userId}`,\n              style: {\n                textDecoration: 'none',\n                color: 'inherit'\n              },\n              onClick: handleScroll,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"name\",\n                children: post.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"date\",\n              children: moment(post.createdAt).fromNow()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n          className: \"icon\",\n          onClick: () => setMenuOpen(!menuOpen)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), menuOpen && post.userId === currentUser.id && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDelete,\n          children: \"delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.desc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: '/upload/' + post.img,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: [isLoading ? 'loading' : data.includes(currentUser.id) ? /*#__PURE__*/_jsxDEV(FavoriteOutlinedIcon, {\n            style: {\n              color: 'red'\n            },\n            onClick: handleLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorderOutlinedIcon, {\n            onClick: handleLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), data === null || data === void 0 ? void 0 : data.length, \" Likes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          onClick: () => setCommentOpen(!commentOpen),\n          children: [/*#__PURE__*/_jsxDEV(TextsmsOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), \"See Comments\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: [/*#__PURE__*/_jsxDEV(ShareOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), \"Share\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), commentOpen && /*#__PURE__*/_jsxDEV(Comments, {\n        postId: post.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Post, \"Su+blI8NaRSn2oy6Bxz4Zh6JySE=\", false, function () {\n  return [useQuery, useQueryClient, useMutation, useMutation];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["D:/WorkSpace/Social Media/client/src/components/post/Post.jsx"],"names":["FavoriteBorderOutlinedIcon","FavoriteOutlinedIcon","TextsmsOutlinedIcon","ShareOutlinedIcon","MoreHorizIcon","Link","Comments","useState","moment","useQuery","useQueryClient","useMutation","makeRequest","useContext","AuthContext","handleScroll","Post","post","commentOpen","setCommentOpen","menuOpen","setMenuOpen","currentUser","isLoading","data","id","get","then","res","queryClient","mutation","liked","delete","postId","onSuccess","invalidateQueries","handleLike","mutate","includes","deleteMutation","handleDelete","userId","profilePic","textDecoration","color","name","createdAt","fromNow","desc","img","length"],"mappings":"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","sourcesContent":["import './post.scss';\r\nimport FavoriteBorderOutlinedIcon from '@mui/icons-material/FavoriteBorderOutlined';\r\nimport FavoriteOutlinedIcon from '@mui/icons-material/FavoriteOutlined';\r\nimport TextsmsOutlinedIcon from '@mui/icons-material/TextsmsOutlined';\r\nimport ShareOutlinedIcon from '@mui/icons-material/ShareOutlined';\r\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz';\r\nimport { Link } from 'react-router-dom';\r\nimport Comments from '../comments/Comments';\r\nimport { useState } from 'react';\r\nimport moment from 'moment';\r\nimport { useQuery, useQueryClient, useMutation } from '@tanstack/react-query';\r\nimport { makeRequest } from '../../axios';\r\nimport { useContext } from 'react';\r\nimport { AuthContext } from '../../context/authContext';\r\nimport { handleScroll } from '../../activate/scroll';\r\n\r\nconst Post = ({ post }) => {\r\n  const [commentOpen, setCommentOpen] = useState(false);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  const { isLoading, data } = useQuery(['likes', post.id], () =>\r\n    makeRequest.get('/likes?postId=' + post.id).then((res) => {\r\n      return res.data;\r\n    }),\r\n  );\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const mutation = useMutation(\r\n    (liked) => {\r\n      if (liked) return makeRequest.delete('/likes?postId=' + post.id);\r\n      return makeRequest.post('/likes', { postId: post.id });\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        // Invalidate and refetch\r\n        queryClient.invalidateQueries(['likes']);\r\n      },\r\n    },\r\n  );\r\n\r\n  const handleLike = () => {\r\n    mutation.mutate(data.includes(currentUser.id));\r\n  };\r\n  \r\n  const deleteMutation = useMutation(\r\n    (postId) => {\r\n      return makeRequest.delete('/posts/' + postId);\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        // Invalidate and refetch\r\n        queryClient.invalidateQueries(['posts']);\r\n      },\r\n    },\r\n  );\r\n\r\n  const handleDelete = () => {\r\n    deleteMutation.mutate(post.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"container\">\r\n        <div className=\"user\">\r\n          <div className=\"userInfo\">\r\n            <Link to={'/profile/' + post.userId} onClick={handleScroll}>\r\n              <img src={'/upload/' + post.profilePic} alt=\"\" />\r\n            </Link>\r\n            <div className=\"details\">\r\n              <Link\r\n                to={`/profile/${post.userId}`}\r\n                style={{ textDecoration: 'none', color: 'inherit' }}\r\n                onClick={handleScroll}\r\n              >\r\n                <span className=\"name\">{post.name}</span>\r\n              </Link>\r\n              <span className=\"date\">{moment(post.createdAt).fromNow()}</span>\r\n            </div>\r\n          </div>\r\n          <MoreHorizIcon className=\"icon\" onClick={() => setMenuOpen(!menuOpen)} />\r\n          {menuOpen && post.userId === currentUser.id && <button onClick={handleDelete}>delete</button>}\r\n        </div>\r\n        <div className=\"content\">\r\n          <p>{post.desc}</p>\r\n          <img src={'/upload/' + post.img} alt=\"\" />\r\n        </div>\r\n        <div className=\"info\">\r\n          <div className=\"item\">\r\n            {isLoading ? (\r\n              'loading'\r\n            ) : data.includes(currentUser.id) ? (\r\n              <FavoriteOutlinedIcon style={{ color: 'red' }} onClick={handleLike} />\r\n            ) : (\r\n              <FavoriteBorderOutlinedIcon onClick={handleLike} />\r\n            )}\r\n            {data?.length} Likes\r\n          </div>\r\n          <div className=\"item\" onClick={() => setCommentOpen(!commentOpen)}>\r\n            <TextsmsOutlinedIcon />\r\n            See Comments\r\n          </div>\r\n          <div className=\"item\">\r\n            <ShareOutlinedIcon />\r\n            Share\r\n          </div>\r\n        </div>\r\n        {commentOpen && <Comments postId={post.id} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n"]},"metadata":{},"sourceType":"module"}